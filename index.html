<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Points Table — Tanbeeh & Tashjeeh</title>

<style type="text/css">@font-face {font-family:Poppins;font-style:normal;font-weight:400;src:url(/cf-fonts/s/poppins/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Poppins;font-style:normal;font-weight:400;src:url(/cf-fonts/s/poppins/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Poppins;font-style:normal;font-weight:400;src:url(/cf-fonts/s/poppins/5.0.11/devanagari/400/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Poppins;font-style:normal;font-weight:500;src:url(/cf-fonts/s/poppins/5.0.11/devanagari/500/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Poppins;font-style:normal;font-weight:500;src:url(/cf-fonts/s/poppins/5.0.11/latin-ext/500/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Poppins;font-style:normal;font-weight:500;src:url(/cf-fonts/s/poppins/5.0.11/latin/500/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Poppins;font-style:normal;font-weight:600;src:url(/cf-fonts/s/poppins/5.0.11/devanagari/600/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}@font-face {font-family:Poppins;font-style:normal;font-weight:600;src:url(/cf-fonts/s/poppins/5.0.11/latin/600/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Poppins;font-style:normal;font-weight:600;src:url(/cf-fonts/s/poppins/5.0.11/latin-ext/600/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Poppins;font-style:normal;font-weight:700;src:url(/cf-fonts/s/poppins/5.0.11/latin/700/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Poppins;font-style:normal;font-weight:700;src:url(/cf-fonts/s/poppins/5.0.11/latin-ext/700/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Poppins;font-style:normal;font-weight:700;src:url(/cf-fonts/s/poppins/5.0.11/devanagari/700/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}</style>
<style>
  :root {
    --primary: #c9a574;
    --primary-dark: #a98251;
    --success: #2e7d32;
    --warning: #e04b4b;
    --shadow: 0 20px 50px rgba(0,0,0,0.35);
    --card-shadow: 0 10px 30px rgba(0,0,0,0.25);
  }

  * { margin:0; padding:0; box-sizing:border-box; }
  body {
    font-family: 'Poppins', sans-serif;
    min-height: 100vh;
    padding: 15px 10px;
    color: white;
    background: url("https://i.ibb.co/STgCyhR/jamea.jpg") center/cover no-repeat fixed;
    position: relative;
  }

  body::before {
    content: "";
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.45);
    backdrop-filter: blur(8px);
    z-index: -1;
  }

  .container { max-width: 1100px; margin: 0 auto; }

  .header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    margin-bottom: 30px;
    flex-wrap: wrap;
    animation: fadeInDown 0.9s ease;
  }

  .logo img {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    border: 5px solid rgba(255,255,255,0.5);
    box-shadow: 0 10px 30px rgba(0,0,0,0.4);
    object-fit: contain;
    background: white;
    padding: 8px;
  }

  .title-group { text-align: center; }
  h1 {
    font-size: 34px;
    color: white;
    font-weight: 700;
    margin: 0;
    text-shadow: 0 4px 10px rgba(0,0,0,0.4);
  }
  .subtitle {
    color: #f0f0f0;
    font-size: 16px;
    font-weight: 500;
    margin-top: 6px;
  }

  .card {
    background: rgba(255,255,255,0.15);
    backdrop-filter: blur(20px);
    border-radius: 24px;
    padding: 28px;
    margin-bottom: 24px;
    box-shadow: var(--shadow);
    border: 1px solid rgba(255,255,255,0.25);
    animation: fadeInUp 0.8s ease;
  }

  .table-container {
    overflow-x: auto;
    border-radius: 20px;
    box-shadow: var(--card-shadow);
    background: rgba(255,255,255,0.12);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.2);
  }

  table { width: 100%; border-collapse: collapse; font-size: 14.5px; }
  th {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
    padding: 16px 12px;
    text-transform: uppercase;
    font-size: 13px;
    letter-spacing: 0.5px;
  }
  td {
    padding: 14px 10px;
    text-align: center;
    border-bottom: 1px solid rgba(255,255,255,0.15);
    color: white;
  }
  tr:hover td { background: rgba(255,255,255,0.1); }

  .tan { background: rgba(198,40,40,0.3) !important; }
  .tash { background: rgba(46,125,50,0.3) !important; }
  .total-positive { color: #a8e6a8; font-weight: 700; }
  .total-negative { color: #ff8a80; font-weight: 700; }

  @keyframes fadeInDown { from { opacity: 0; transform: translateY(-30px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

  @media (max-width: 600px) {
    .header { gap: 14px; }
    .logo img { width: 80px; height: 80px; }
    h1 { font-size: 28px; }
    .card { padding: 20px; }
  }
</style>
</head>
<body>

<div class="container">

  <div class="header">
    <div class="logo">
      <img src="https://i.ibb.co/Ndqj258K/panchgani-removebg-preview.png" alt="Logo">
    </div>
    <div class="title-group">
      <h1>Points Table</h1>
      <p class="subtitle">Tanbeeh & Tashjeeh – Live Standings</p>
    </div>
  </div>

  <div class="card">
    <div class="table-container">
      <table id="pointsTable">
        <thead>
          <tr>
            <th>No.</th>
            <th>Name</th>
            <th class="tan">Tanbeeh</th>
            <th class="tash">Tashjeeh</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody id="tableBody">
          <!-- Data will be loaded here dynamically -->
        </tbody>
      </table>
    </div>
  </div>

</div>

<script>
  // Your web app URL
  const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxuYfx40BopDL4xhK1hWRADSmiJM8NzyfoiPU5kr9xtrH_KWj47HVt65PWrZTeChMWg/exec";

  // Student names array (must match the order in your Google Sheet)
  const NAMES = [
    "Burhanuddin ali mohammad bhai Bazar", "Abdulkadir M. Mustafa Bhai Hamid", "Taher Aliasger Bhai Musaji", 
    "Mustafa Yusuf Bhai Dawoodi", "Mufaddal mustansir bhai rangwala", "Husain Murtaza bhai Ahemadabad",
    "Shabbir Habib Bhai Jalali", "Taher Dawood Bhai Suksar", "Mohammed Shk Huzaifa Shakir", 
    "Burhanuddin Shabbir Bhai Sabunwala", "Adnan Juzer Bhai Banswadi", "Aziz Husain Saeed Abbas Bhai Saghar",
    "Burahanuddin hussain bhai chittalwala", "Husain mohammad bhai bootwala", "Mohammed Burhanuddin Bhai Gharyali",
    "Husain murtaza Fatehnagar", "Taha Firoz Bhai Petlawad", "Burhanuddin Juzer Bhai Saifee",
    "Ibrahim Aliasger Bhai Marhaba", "Qusai Mandasaur", "Taha Fakhruddin Bhagat",
    "Mohammed Mustafa bhai Dewaswala", "Burhanuddin Saleh Bhai Lakda", "Abdulqadir Haider Disa",
    "Mohammed Primas", "Mohammed Mustafa Bhai Qudrati", "Hussain Yusuf bhai kanore wala",
    "Ibrahim Hatim Bhai Pathari", "Murtaza Raj", "Mufaddal Yusuf Bhai Motor",
    "Hatim Abbas Bhai Kathana", "Behlul Khuzaima Saifee", "Mohammed Mustafa Bhai Paghri",
    "Hussain Sadri", "Fakhruddin murtaza bhai ezzy", "Taha Abbas Bhai Mhow"
  ];

  // Fetch points data from Google Apps Script web app
  async function fetchPoints() {
    try {
      const response = await fetch(`${WEB_APP_URL}?action=getPoints`);
      const pointsData = await response.json();
      return pointsData;
    } catch (error) {
      console.error("Error fetching points:", error);
      return null;
    }
  }

  // Update the table with new data
  function updateTable(pointsData) {
    const tableBody = document.getElementById("tableBody");
    tableBody.innerHTML = ""; // Clear existing rows
    
    pointsData.forEach((student, index) => {
      const tanbeeh = student.tanbeeh || 0;
      const tashjeeh = student.tashjeeh || 0;
      const total = tashjeeh - tanbeeh;
      
      const row = document.createElement("tr");
      
      // Determine total class
      const totalClass = total >= 0 ? "total-positive" : "total-negative";
      const totalDisplay = total >= 0 ? `+${total}` : total;
      
      row.innerHTML = `
        <td>${index + 1}</td>
        <td style="text-align:left;">${NAMES[index]}</td>
        <td class="tan">${tanbeeh}</td>
        <td class="tash">${tashjeeh}</td>
        <td class="${totalClass}">${totalDisplay}</td>
      `;
      
      tableBody.appendChild(row);
    });
  }

  // Load data initially and then refresh every 10 seconds
  async function loadData() {
    const pointsData = await fetchPoints();
    if (pointsData) {
      updateTable(pointsData);
    }
  }

  // Initialize
  document.addEventListener("DOMContentLoaded", () => {
    loadData();
    // Refresh data every 10 seconds
    setInterval(loadData, 10000);
    
    // Add a subtle animation when data refreshes
    const tableContainer = document.querySelector(".table-container");
    setInterval(() => {
      tableContainer.style.opacity = "0.9";
      setTimeout(() => {
        tableContainer.style.opacity = "1";
      }, 300);
    }, 10000);
  });

  // Optional: Add a last updated timestamp
  function updateTimestamp() {
    const now = new Date();
    const subtitle = document.querySelector(".subtitle");
    if (subtitle) {
      subtitle.innerHTML = `Tanbeeh & Tashjeeh – Live Standings • Last updated: ${now.toLocaleTimeString()}`;
    }
  }

  // Update timestamp when data loads
  async function loadDataWithTimestamp() {
    await loadData();
    updateTimestamp();
  }

  // Replace the initial loadData call with this one
  document.addEventListener("DOMContentLoaded", () => {
    loadDataWithTimestamp();
    setInterval(loadDataWithTimestamp, 10000);
  });
</script>
</body>
</html>
